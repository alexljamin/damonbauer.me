<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Enable an experimental feature of Chrome to see how quickly your site is loading.">
  <title>Chrome Filmstrip & Improving Page Speed | Damon Bauer</title>
  <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="/favicon.ico" rel="icon" type="image/x-icon">
  <link rel="canonical" href="http://damonbauer.me/chrome-filmstrip/">
  <link href="http://feeds.feedburner.com/damonbauer" rel="alternate" type="application/atom+xml">
  <style type="text/css">*,*:before,*:after{padding:0;margin:0;box-sizing:border-box}html{overflow-y:scroll;background-color:#373a4a;color:#c4c4c4}body{margin:0 auto;max-width:36em;padding:0 1em;font-family:monospace;font-size:22px}@media screen and (min-width: 50em){body{padding:0}}p,ul,ol{font-size:22px;font-size:1rem;line-height:1.7273;margin-bottom:38px;margin-bottom:1.72727rem}a{border-bottom:1px solid transparent;text-decoration:none;color:#e64845}a:hover,a:focus{border-bottom-color:#e64845;outline-color:#e64845}b,strong,h1,h2,h3,header a{font-weight:700}img{max-width:100%}figure{margin-bottom:1.5rem}figcaption{font-size:18px;font-size:0.81818rem;line-height:2.1111;margin-bottom:38px;margin-bottom:1.72727rem;font-style:italic}blockquote{margin-bottom:1.5em;padding:0.3125em 0.625em;font-style:italic;background:#c4c4c4;color:#373a4a}blockquote p{margin:0}::-moz-selection{background-color:rgba(230,72,69,0.8);color:#c4c4c4}::selection{background-color:rgba(230,72,69,0.8);color:#c4c4c4}.Masthead{clear:both;padding:1.5em 0 2.5em;text-align:center}.Masthead a{font-size:42px;font-size:1.90909rem;line-height:0.9048;margin-bottom:38px;margin-bottom:1.72727rem;display:inline-block;border-bottom:2px solid transparent;font-weight:bold;letter-spacing:3px}@media screen and (min-width: 50em){.Masthead a{font-size:64px;font-size:2.90909rem;line-height:0.5938;margin-bottom:38px;margin-bottom:1.72727rem}}.Masthead a:hover,.Masthead a:focus{border-bottom:2px solid #e64845}.Masthead span{font-size:22px;font-size:1rem;line-height:1.7273;margin-bottom:38px;margin-bottom:1.72727rem;display:block;margin-bottom:0;font-style:italic;color:#c4c4c4}@media screen and (max-width: 25em){.Masthead span{letter-spacing:-1px}}.post-list,.post{margin:0;padding:0;list-style:none}.post-list li{position:relative;margin-bottom:3em}.post-list li:last-of-type:after{display:none}.post-list li:after{position:absolute;bottom:-1em;left:50%;margin-left:-1em;line-height:1;font-size:2em;content:"\2026"}.post-header{display:block;margin-bottom:1em}.post-title{font-size:42px;font-size:1.90909rem;line-height:0.9048;margin-bottom:38px;margin-bottom:1.72727rem;margin-bottom:0}.post-meta{display:block;font-size:18px;font-size:0.81818rem;line-height:2.1111;margin-bottom:38px;margin-bottom:1.72727rem}pre{font-size:18px;font-size:0.81818rem;line-height:2.1111;margin-bottom:38px;margin-bottom:1.72727rem;padding:0.5em;color:#373a4a}p code,li code{font-size:18px;font-size:0.81818rem;line-height:2.1111;margin-bottom:38px;margin-bottom:1.72727rem;padding:0.25em;background:rgba(255,255,255,0.75);color:#373a4a}.post ul,.post ol{margin-left:2em}.post ul ul{margin-bottom:0}.post h2{margin:2em 0 0.5em}abbr{border-bottom:1px dotted #585B5E}hr{height:1px;border:0;border-bottom:1px dotted #585B5E}.iframe-container{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%}.iframe-container iframe{position:absolute;top:0;left:0;width:100%;height:100%}footer{clear:both;padding:1rem 0}footer ul{margin:0;padding:0;list-style:none;text-align:right}footer ul li{display:inline-block;margin-left:1rem}footer ul a{display:block;width:1.5rem;height:1.5rem;font-size:0;border-bottom:0;color:transparent}footer ul a:hover svg path,footer ul a:focus svg path{fill:#e64845;opacity:1}footer ul svg path{fill:#c4c4c4;opacity:0.5}.highlight{background:rgba(255,255,255,0.75);max-width:100%;overflow-x:scroll}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .gd{background-color:#fdd}.highlight .gd .x{background-color:#faa}.highlight .gi{background-color:#dfd}.highlight .gi .x{background-color:#afa}.highlight .go{color:#888}.highlight .gu{color:#aaa}.highlight .k,.highlight .o,.highlight .cp,.highlight .cs,.highlight .gs,.highlight .kc,.highlight .kd,.highlight .kp,.highlight .kr,.highlight .kt,.highlight .nc,.highlight .ne,.highlight .nf,.highlight .ow{font-weight:bold}.highlight .c,.highlight .cm,.highlight .c1,.highlight .cs,.highlight .ge{font-style:italic}.highlight .gd,.highlight .gd .x,.highlight .gi,.highlight .gi .x{color:#000}.highlight .gr,.highlight .gt{color:#a00}.highlight .gp,.highlight .nn{color:#555}.highlight .s,.highlight .sb,.highlight .sc,.highlight .sd,.highlight .s2,.highlight .se,.highlight .sh,.highlight .si,.highlight .sx,.highlight .s1{color:#d14}.highlight .c,.highlight .cm,.highlight .c1{color:#998}.highlight .cp,.highlight .cs,.highlight .gh,.highlight .bp{color:#999}.highlight .il,.highlight .m,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:#099}.highlight .kt,.highlight .nc{color:#458}.highlight .vc,.highlight .vg,.highlight .vi,.highlight .nv,.highlight .na,.highlight .no{color:#008080}.highlight .ne,.highlight .nf{color:#900}.highlight .nb{color:#0086B3}.highlight .ni{color:#800080}.highlight .nt{color:#000080}.highlight .w{color:#bbb}.highlight .sr{color:#009926}.highlight .ss{color:#990073}
</style>
</head>


  <body>
    <header role="banner" class="Masthead">
  <a href="/">Damon Bauer</a>
  <span>Front End Developer &bull; Nashville, TN</span>
</header>


    <main role="main">
      <div class="post">
  <header class="post-header">
    <h1 class="post-title">Chrome Filmstrip & Improving Page Speed</h1>
    <span class="post-meta">June 19, 2015</span>
  </header>

  <article class="post-content">
    <p>You may have heard of the wonderful site, <a href="http://webpagetest.org">WebpageTest</a>, when researching ways to improve your site performance. One of the most useful features (in my opinion) is the Filmstrip; it shows you incremental screenshots of the browser rendering your site, so you can see how quickly users are able to start consuming content. As of the past couple of months, you can enable similar functionality in Chrome!
<!--more--></p>

<h2 id="what-is-filmstrip">What Is Filmstrip?</h2>
<p>Simply put, the Filmstrip is a series of images that display what a page rendered at that specific millisecond of the page load lifecycle.</p>
<video style="max-width:100%" src="/assets/videos/chrome-filmstrip/filmstrip.mp4" preload="" autoplay="" loop=""></video>

<h2 id="getting-filmstrip-in-chrome">Getting Filmstrip in Chrome</h2>

<div class="iframe-container">
	<iframe src="https://www.youtube.com/embed/5HZWE8-V-Fo?rel=0&amp;showinfo=0" frameborder="0" allowfullscreen=""></iframe>
</div>
<p><br />
First, make sure you have <a href="https://www.google.com/chrome/browser/canary.html">Chrome Canary</a>. Then, follow these steps:</p>

<ul>
  <li>Go to the Chrome Flags page (chrome://flags/#enable-devtools-experiments)</li>
  <li>Click “Enable” under the heading “Enable Developer Tools experiments”</li>
  <li>Open the Dev Tools window, click the gear icon in the top right</li>
  <li>Click the “Experiments” link in the left side navigation</li>
  <li>Hit your “Shift” key 6 times, rather quickly, to show super secret options</li>
  <li>Check “Filmstrip in Network and Timeline Panel” to enable</li>
</ul>

<p>You’re ready to go! The filmstrip feature is now enabled. Here are the remaining steps:</p>

<ul>
  <li>Close the options panel and head to the “Network” tab.</li>
  <li>Click the video camera icon. You should see a message that says: “No frames recorded. Reload page to start recording.”</li>
  <li><strong>While the Dev Tools window is still focused</strong>, hit Cmd/Ctrl + R to reload the page. (This will not work if you have the main part of the browser focused)</li>
  <li>Once the page is loaded, you should see incremental images of your site loading, along with the time in which each frame was rendered.</li>
</ul>

<p>You can then click on a specific frame, then use your arrow keys to go forward or back.</p>

<p>I recommend enabling the “Disable cache” option at the top of the Network panel. This ensures that on each page load, Chrome will request assets new every time, just like a first time visitor to your site would be doing.</p>

<h2 id="goals">Goals</h2>
<p>By seeing when and how your site is painting to the screen, you can begin to find ways of improving your performance.</p>

<h3 id="time-to-first-byte">Time to First Byte</h3>
<p>If the first few seconds of the page load are a blank white screen, you need to work on improving the <em>Time to First Byte</em>. This is typically a symptom of an overloaded server (especially common if you use a shared server), or inefficient code (such as a poorly written database query) or memory leaks. <a href="http://www.websiteoptimization.com/speed/tweak/time-to-first-byte/">See this post for more details</a>.</p>

<h3 id="custom-fonts">Custom Fonts</h3>
<p>If your site is loading quickly but your text is not visible until very late, I’d assume you’re using a custom font. This side effect makes your site <em>feel</em> slower; the term being used to address this issue is <strong>perceived performance</strong>. In order to make your site feel faster and allow users to start reading content immediately, you can use a web font loader, which will allow you to:</p>

<ul>
  <li>Render your content using a web safe font stack, such as <code>html { font-family: Arial, Helvetica, sans-serif }</code>, by default</li>
  <li>Once the web font loader has detected that your custom fonts have successfully downloaded &amp; parsed, add a class to the <code>html</code> or <code>body</code> tag, like so:
    <ul>
      <li>Add some CSS that swaps the default font stack out for the custom font, e.g.: <code>html.fonts-loaded { font-family: "Open Sans", sans-serif }</code></li>
    </ul>
  </li>
</ul>

<p>I’d highly recommend the <a href="https://github.com/zachleat/font-family-reunion/blob/master/test/lib/fontfaceonload.js">FontFaceOnload library</a> by Zach Leat; I’ve used it with great success recently. Simply include the FontFaceOnload library, and the following snippet:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">FontFaceOnload</span><span class="p">(</span><span class="s2">&quot;Open Sans&quot;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="s2">&quot;fonts-loaded&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="s2">&quot;fonts-loaded&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre></div>
<p><br />
The <code>success</code> method above is invoked when each variation of Open Sans that is included has completely loaded. Then, it checks to see if the <code>&lt;html&gt;</code> element has a class of <code>fonts-loaded</code>; if it does not, it continues and will append the class to the element, thus enabling the <code>html.fonts-loaded</code> styles as described above.</p>

<h3 id="lazy-loading-images">Lazy Loading Images</h3>
<p>The last tip I’ll share is in regards to images. If you have analytics installed on your site, try to find the most common screen sizes that are visiting your site. Pick an average <strong>height</strong> that encompasses the majority of your visitors - this will become your “fold”<sup><a name="fold-link" href="#fold">1</a></sup>. If there are images below the fold when your page loads, you are wasting precious bandwidth and HTTP requests that could be used for other resources. I suggest to use a library like <a href="https://github.com/toddmotto/echo">Echo.js</a>, <a href="https://github.com/callmecavs/layzr.js/tree/master">Lazyr.js</a> or <a href="https://github.com/callumacrae/whtevr">whtevr</a> to lazy load your images only when they are in the viewport.</p>

<p>Finally, are you aware that roughly <a href="http://www.webperformancetoday.com/2014/12/02/page-bloat-update-average-top-1000-web-page-1795-kb-size/">50%+ of a page’s weight is images</a>? I hope you are compressing your images. If you’re not, there’s no excuse - there are a <a href="http://addyosmani.com/blog/image-optimization-tools/">myriad of tools (web, app and build tool based)</a> that will make the process ridiculously simple.</p>

<h2 id="this-is-just-the-beginning">This is Just the Beginning</h2>
<p>To be honest, this post started off as a quick little post to introduce an awesome little feature in Chrome Canary. It quickly (d)evolved into a performance post. However, I have barely scratched the surface as to what you can, and arguably should, be doing. Other avenues to pursue include:</p>

<ul>
  <li>Critical Path rendering</li>
  <li>Asynchronous loading of JS and CSS</li>
  <li>Concatenation &amp; minification</li>
  <li>Cache, gzip, CDN</li>
</ul>

<p>The list of performance considerations is continuing to grow. Hopefully now you understand a little a bit more of the why and how to improve performance. After all, <a href="http://alistapart.com/article/improving-ux-through-front-end-performance">it’s everyone’s job</a>.</p>

<p>Feel free to reach out to me via <a href="https://twitter.com/damon_bauer">Twitter</a> or <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#104;&#101;&#108;&#108;&#111;&#064;&#100;&#097;&#109;&#111;&#110;&#098;&#097;&#117;&#101;&#114;&#046;&#109;&#101;">email</a> if you need some help improving your site’s performance.</p>

<p><em>A special thanks goes out to <a href="http://twitter.com/elijahmanor">@elijahmanor</a> for showing me the Chrome Filmstrip feature in the first place.</em></p>

<hr class="footnote-separator" />

<p><a name="fold"></a></p>

<ol>
  <li>I know, I know. The <a href="http://thereisnopagefold.com/">fold</a> <a href="http://iampaddy.com/lifebelow600/">doesn’t</a> <a href="http://www.lukew.com/ff/entry.asp?1946">exist</a>. That’s why I said to use data from your site to determine a rough estimate of your user base. <a href="#fold-link">↩</a></li>
</ol>

  </article>
</div>

    </main>

    <footer role="siteinfo">
  <ul>
    <li>
      <a href="https://github.com/damonbauer">
        <svg viewBox="0 0 16 16">
        <path d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
        </svg>
      </a>
    </li>
    <li>
      <a href="https://twitter.com/damon_bauer">
        <svg viewBox="0 0 16 16">
        <path d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
          c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
        </svg>
      </a>
    </li>
    <li>
      <a href="http://feeds.feedburner.com/damonbauer">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M161.757 406.25c0 30.79-24.96 55.75-55.75 55.75s-55.75-24.96-55.75-55.75 24.96-55.75 55.75-55.75 55.75 24.958 55.75 55.75zm-111.5-215.826v82.593C153.993 274.083 238.17 358.26 239.237 462h82.593c-1.066-149.52-122.056-270.51-271.574-271.576zm0-57.822c87.694.38 170.083 34.695 232.134 96.747 62.18 62.17 96.51 144.76 96.76 232.65h82.6C461.23 234.856 277.334 50.792 50.258 50v82.6z"/></svg>
      </a>
    </li>
  </ul>
</footer>

  </body>
</html>
